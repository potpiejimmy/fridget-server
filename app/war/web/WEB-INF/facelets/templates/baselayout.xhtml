<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    
    <ui:composition template="/WEB-INF/facelets/templates/rootlayout.xhtml">

        <ui:define name="pagetitle">Liese &amp; Liese Research</ui:define>

        <ui:define name="headerdivright">
            <h:form>
                <h:panelGrid columns="1">
                    <h:panelGrid columns="5">
                        <h:outputLabel for="selectDevice" value="Select Your Device:" style="font-size: 75%;"/>
                        <p:selectOneMenu id="selectDevice" value="#{deviceDebugBean.selectedDevice}" onchange="this.form.submit();">
                            <f:selectItems value="#{deviceDebugBean.devicesSelectItems}"/>
                        </p:selectOneMenu>
                        <p:message for="selectDevice"/>
                        <p:commandLink id="logoutBtn" value="Logout" action="#{usersBean.logout}" ajax="false" immediate="true"/>
                        <p:outputPanel><h:outputText value="#{request.userPrincipal.name}"/></p:outputPanel>
                    </h:panelGrid>
                </h:panelGrid>
            </h:form>
        </ui:define>

        <ui:define name="rootbody">

            <h:form id="tabMenuForm">
                <p:tabMenu id="tabMenu" activeIndex="${tabIndex}">  
                    <p:menuitem value="Device Configuration" url="/index.xhtml"/>
                    <p:menuitem value="Device Log" url="/devicelog.xhtml"/>
                    <p:menuitem value="EPD Image Upload" url="/imageupload.xhtml"/>
                </p:tabMenu>
            </h:form>  

            <p/>

            <ui:insert name="body"/>

            </ui:define>

            <ui:define name="rootfooter">

            <ui:insert name="body_footer"/>

            <div id="root_footer">
                <hr/>
                <h:outputLink value="#{request.contextPath}/app/changepassword.xhtml">
                    <h:outputText value="Change password"/>
                </h:outputLink>
                <h:panelGroup rendered="#{request.isUserInRole('superuser')}">,
                    <h:outputLink value="#{request.contextPath}/app/adminuser.xhtml">
                        <h:outputText value="Manage Users"/>
                    </h:outputLink>
                </h:panelGroup>
            </div>

        </ui:define>

    </ui:composition>
    
</html>
